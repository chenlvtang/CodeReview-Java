System.register(["./config-legacy-d785a9ee.js","./content-legacy-136d9c10.js","./DialogForm.vue_vue_type_script_setup_true_lang-legacy-fd3043ab.js","./FileListUpload.vue_vue_type_style_index_0_scoped_cd89d899_lang-legacy-2402d9db.js","./index-legacy-1e63c30f.js","./BaseUpload-legacy-960508fe.js"],(function(e,l){"use strict";var a,t,u,d,i,o,r,n,m,s,c,b,p,v,g,k,h,y,V,f,I,_,$,q,U,w,x,B,j;return{setters:[e=>{a=e.a},e=>{t=e.G,u=e.H,d=e.E,i=e.t},e=>{o=e.a,r=e._},e=>{n=e.a},e=>{m=e.d,s=e.p,c=e.r,b=e.v,p=e.a,v=e.c,g=e.e,k=e.w,h=e.h,y=e.k,V=e.t,f=e.I,I=e.a8,_=e.j,$=e.$,q=e.a7,U=e.X,w=e.o,x=e.g,B=e.i},e=>{j=e.B}],execute:function(){const l=["onClick"],C=["src"],R=e("_",m({__name:"ImageExtractor",props:{modelValue:{type:Boolean,required:!0},urls:{type:Array,default:()=>[]},min:{type:Number,default:1},max:{type:Number,default:1},appendToBody:{type:Boolean}},emits:["update:modelValue","finished"],setup(e,{emit:a}){const t=e,{urls:u,max:d,modelValue:i}=s(t),r=c();return b(i,(()=>{i.value&&(r.value=o.uniq(u.value).map((e=>({url:e,checked:!1}))))})),(t,u)=>{const i=p("el-col"),o=p("el-row"),n=p("el-button"),m=p("el-dialog");return v(),g(m,{"model-value":e.modelValue,title:t.$t("article.extractImage"),width:768,"append-to-body":e.appendToBody,"onUpdate:modelValue":u[1]||(u[1]=e=>t.$emit("update:modelValue",e))},{footer:k((()=>[h(n,{type:"primary",disabled:r.value.filter((e=>e.checked)).length<e.min,onClick:u[0]||(u[0]=()=>(a("finished",r.value.filter((e=>e.checked)).map((e=>e.url))),void a("update:modelValue",!1)))},{default:k((()=>[y(V(t.$t("ok")),1)])),_:1},8,["disabled"])])),default:k((()=>[h(o,{gutter:16},{default:k((()=>[(v(!0),f(q,null,I(r.value,(e=>(v(),g(i,{key:e.url,src:e,span:8,class:"mt-2"},{default:k((()=>[_("div",{class:$(["p-1 border-2 rounded cursor-pointer text-center",{"border-primary":e.checked,"border-2":e.checked}]),onClick:()=>(e=>{if(e.checked)return void(e.checked=!e.checked);let l=0;r.value.forEach((e=>{e.checked&&(l+=1),l>=d.value&&(e.checked=!1)})),e.checked=!0})(e)},[_("img",{src:e.url,class:"max-h-36 inline"},null,8,C)],10,l)])),_:2},1032,["src"])))),128))])),_:1})])),_:1},8,["model-value","title","append-to-body"])}}}));e("a",m({name:"BlockItemForm",props:{modelValue:{type:Boolean,required:!0},beanId:{type:Number,default:null},beanIds:{type:Array,required:!0},blockId:{type:Number,default:null},articleId:{type:Number,default:null},title:{type:String,default:null},description:{type:String,default:null},video:{type:String,default:null},images:{type:Array,default:()=>[]}},emits:{"update:modelValue":null,finished:null},setup(e){const l=e,{blockId:o}=s(l),m=c(),b=c(),_=c({}),$=c([]),C=U((()=>$.value.find((e=>e.id===(m.value??o?.value)))));w((async()=>{$.value=await a()}));const T=c(!1);return(l,a)=>{const s=p("el-option"),c=p("el-select"),U=p("el-form-item"),w=p("el-input"),F=p("el-button"),N=p("el-switch");return v(),f("div",null,[h(r,{values:_.value,"onUpdate:values":a[14]||(a[14]=e=>_.value=e),name:l.$t("menu.content.blockItem"),"query-bean":B(t),"create-bean":B(u),"update-bean":B(d),"delete-bean":B(i),"bean-id":e.beanId,"bean-ids":e.beanIds,focus:b.value,"init-values":()=>({blockId:B(o),articleId:e.articleId,title:e.title,description:e.description,video:e.video}),"to-values":e=>({...e,articleTitle:e.article?.title,articleId:e.article?.id}),addable:B(C)?.enabled,perms:"blockItem","model-value":e.modelValue,"onUpdate:modelValue":a[15]||(a[15]=e=>l.$emit("update:modelValue",e)),onFinished:a[16]||(a[16]=()=>l.$emit("finished")),onBeanChange:a[17]||(a[17]=e=>m.value=e.blockId)},{default:k((({isEdit:t})=>[h(U,{prop:"blockId",label:l.$t("blockItem.block"),rules:{required:!0,message:()=>l.$t("v.required")}},{default:k((()=>[h(c,{modelValue:_.value.blockId,"onUpdate:modelValue":a[0]||(a[0]=e=>_.value.blockId=e),class:"w-full",disabled:"",onChange:a[1]||(a[1]=e=>m.value=e)},{default:k((()=>[(v(!0),f(q,null,I($.value,(e=>(v(),f(q,{key:e.id},[t||e.enabled?(v(),g(s,{key:0,label:e.name,value:e.id,disabled:!e.enabled},null,8,["label","value","disabled"])):x("",!0)],64)))),128))])),_:2},1032,["modelValue"])])),_:2},1032,["label","rules"]),t&&null!=_.value.articleId?(v(),g(U,{key:0,label:l.$t("blockItem.articleId")},{default:k((()=>[h(w,{modelValue:_.value.articleId,"onUpdate:modelValue":a[2]||(a[2]=e=>_.value.articleId=e),disabled:""},null,8,["modelValue"])])),_:1},8,["label"])):x("",!0),t&&null!=_.value.articleTitle?(v(),g(U,{key:1,label:l.$t("blockItem.articleTitle")},{default:k((()=>[h(w,{modelValue:_.value.articleTitle,"onUpdate:modelValue":a[3]||(a[3]=e=>_.value.articleTitle=e),disabled:""},null,8,["modelValue"])])),_:1},8,["label"])):x("",!0),h(U,{prop:"title",label:l.$t("blockItem.title"),rules:{required:!0,message:()=>l.$t("v.required")}},{default:k((()=>[h(w,{ref_key:"focus",ref:b,modelValue:_.value.title,"onUpdate:modelValue":a[4]||(a[4]=e=>_.value.title=e),maxlength:"150"},null,8,["modelValue"])])),_:1},8,["label","rules"]),null==_.value.articleId&&B(C)?.withLinkUrl?(v(),g(U,{key:2,prop:"linkUrl",label:l.$t("blockItem.linkUrl"),rules:B(C)?.linkUrlRequired?[{required:!0,message:()=>l.$t("v.required")},{pattern:/^(http|\/).*$/,message:()=>l.$t("blockItem.error.linkUrl")}]:{pattern:/^(http|\/).*$/,message:()=>l.$t("blockItem.error.linkUrl")}},{default:k((()=>[h(w,{modelValue:_.value.linkUrl,"onUpdate:modelValue":a[5]||(a[5]=e=>_.value.linkUrl=e),maxlength:"255"},null,8,["modelValue"])])),_:1},8,["label","rules"])):x("",!0),B(C)?.withSubtitle?(v(),g(U,{key:3,prop:"subtitle",label:l.$t("blockItem.subtitle"),rules:{required:B(C)?.subtitleRequired,message:()=>l.$t("v.required")}},{default:k((()=>[h(w,{modelValue:_.value.subtitle,"onUpdate:modelValue":a[6]||(a[6]=e=>_.value.subtitle=e),maxlength:"150"},null,8,["modelValue"])])),_:1},8,["label","rules"])):x("",!0),B(C)?.withDescription?(v(),g(U,{key:4,prop:"description",label:l.$t("blockItem.description"),rules:{required:B(C)?.descriptionRequired,message:()=>l.$t("v.required")}},{default:k((()=>[h(w,{modelValue:_.value.description,"onUpdate:modelValue":a[7]||(a[7]=e=>_.value.description=e),type:"textarea",rows:5,maxlength:"1000"},null,8,["modelValue"])])),_:1},8,["label","rules"])):x("",!0),B(C)?.withImage?(v(),g(U,{key:5,prop:"image",label:l.$t("blockItem.image"),rules:{required:B(C)?.imageRequired,message:()=>l.$t("v.required")}},{default:k((()=>[h(B(n),{modelValue:_.value.image,"onUpdate:modelValue":a[8]||(a[8]=e=>_.value.image=e),width:B(C).imageWidth,height:B(C).imageHeight,mode:"manual"},null,8,["modelValue","width","height"]),e.images.length>0?(v(),g(F,{key:0,class:"ml-2 self-start",onClick:a[9]||(a[9]=()=>T.value=!0)},{default:k((()=>[y(V(l.$t("article.extractImage")),1)])),_:1})):x("",!0)])),_:1},8,["label","rules"])):x("",!0),B(C)?.withMobileImage?(v(),g(U,{key:6,prop:"mobileImage",label:l.$t("blockItem.mobileImage"),rules:{required:B(C)?.mobileImageRequired,message:()=>l.$t("v.required")}},{default:k((()=>[h(B(n),{modelValue:_.value.mobileImage,"onUpdate:modelValue":a[10]||(a[10]=e=>_.value.mobileImage=e),width:B(C).mobileImageWidth,height:B(C).mobileImageHeight,mode:"manual"},null,8,["modelValue","width","height"])])),_:1},8,["label","rules"])):x("",!0),B(C)?.withVideo?(v(),g(U,{key:7,prop:"video",label:l.$t("blockItem.video"),rules:{required:B(C)?.videoRequired,message:()=>l.$t("v.required")}},{default:k((()=>[h(w,{modelValue:_.value.video,"onUpdate:modelValue":a[11]||(a[11]=e=>_.value.video=e),maxlength:"255"},{prepend:k((()=>[y("URL")])),_:1},8,["modelValue"]),h(B(j),{type:"video","on-success":e=>_.value.video=e.url},null,8,["on-success"])])),_:1},8,["label","rules"])):x("",!0),h(U,{prop:"targetBlank",label:l.$t("blockItem.targetBlank")},{default:k((()=>[h(N,{modelValue:_.value.targetBlank,"onUpdate:modelValue":a[12]||(a[12]=e=>_.value.targetBlank=e)},null,8,["modelValue"])])),_:1},8,["label"]),h(U,{prop:"enabled",label:l.$t("blockItem.enabled")},{default:k((()=>[h(N,{modelValue:_.value.enabled,"onUpdate:modelValue":a[13]||(a[13]=e=>_.value.enabled=e)},null,8,["modelValue"])])),_:1},8,["label"])])),_:1},8,["values","name","query-bean","create-bean","update-bean","delete-bean","bean-id","bean-ids","focus","init-values","to-values","addable","model-value"]),h(R,{modelValue:T.value,"onUpdate:modelValue":a[18]||(a[18]=e=>T.value=e),urls:e.images,"append-to-body":!0,onFinished:a[19]||(a[19]=e=>_.value.image=e[0])},null,8,["modelValue","urls"])])}}}))}}}));
